n, m = map(int, input().split())
case = [list(map(int, input().split())) for _ in range(n)]
tet = [[[0, 0], [0, 1], [0, 2], [0, 3]],
       [[0, 0], [1, 0], [2, 0], [3, 0]],
       [[0, 0], [0, 1], [1, 0], [1, 1]],
       [[0, 0], [0, 1], [0, 2], [1, 0]],
       [[0, 0], [0, 1], [0, 2], [1, 2]],
       [[0, 0], [1, 0], [1, 1], [1, 2]],
       [[0, 2], [1, 2], [1, 1], [1, 0]],
       [[0, 1], [0, 0], [1, 0], [2, 0]],
       [[0, 0], [0, 1], [1, 1], [2, 1]],
       [[0, 0], [1, 0], [2, 0], [2, 1]],
       [[0, 1], [1, 1], [2, 1], [2, 0]],
       [[0, 0], [0, 1], [0, 2], [1, 1]],
       [[0, 1], [1, 0], [1, 1], [1, 2]],
       [[0, 0], [1, 0], [1, 1], [2, 0]],
       [[1, 0], [0, 1], [1, 1], [2, 1]],
       [[0, 1], [1, 1], [1, 0], [2, 0]],
       [[0, 0], [1, 0], [1, 1], [2, 1]],
       [[0, 1], [0, 2], [1, 1], [1, 0]],
       [[0, 0], [0, 1], [1, 1], [1, 2]]]
res = 0
for i in range(n):
    for j in range(m):
        for a, b, c, d in tet:
            try:
                res = max(res, (case[a[0] + i][a[1] + j] + case[b[0] + i][b[1] + j] +
                                case[c[0] + i][c[1] + j] + case[d[0] + i][d[1] + j]))
            except:
                continue
print(res)
